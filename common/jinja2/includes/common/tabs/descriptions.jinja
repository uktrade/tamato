{% from "components/table/macro.njk" import govukTable %}
{% from 'macros/create_link.jinja' import create_link %}

{% set description_rows = [] %}
{% for description in object.get_descriptions() %}
	{% set edit_url = description.get_url("edit") %}
	{% set description_row = [
		{"text": "{:%d %b %Y}".format(description.validity_start)},
		{"text": description.description},
	]%}
	{% if edit_url %}
		{{ description_row.append({"html": create_link(edit_url, "Edit") }) or "" }}
	{% endif %}
	{{ description_rows.append(description_row) or "" }}
{% endfor %}

<h2 class="govuk-heading-l">Descriptions</h2>
{% set head = [
	{"text": "Start date", "classes":  "govuk-!-width-one-eighth"},
	{"text": "Description"},
]%}
{% if description_rows.0|length == 3 %}
	{{ head.append({"text": "Actions"}) or "" }}
{% endif %}
{{ govukTable({
	"head": head,
	"rows": description_rows
}) }}
