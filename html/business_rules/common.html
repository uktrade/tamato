<!DOCTYPE html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>Base classes - DIT Tariff Management Tool</title>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/javascripts/_analytics.js"></script>
    <script src="../_static/javascripts/_govuk/govuk-frontend-3.10.2.min.js"></script>
    <script src="../_static/javascripts/_govuk/modules.js"></script>
    <script src="../_static/javascripts/_modules/anchored-headings.js"></script>
    <script src="../_static/javascripts/_modules/collapsible-navigation.js"></script>
    <script src="../_static/javascripts/_modules/in-page-navigation.js"></script>
    <script src="../_static/javascripts/_modules/navigation.js"></script>
    <script src="../_static/javascripts/_modules/page-expiry.js"></script>
    <script src="../_static/javascripts/_modules/table-of-contents.js"></script>
    <script src="../_static/javascripts/_start_modules.js"></script>
    <script src="../_static/javascripts/_vendor/fixedsticky.js"></script>
    <script src="../_static/javascripts/_vendor/lodash.js"></script>
    <script src="../_static/javascripts/_vendor/modernizer.js"></script>
    <script src="../_static/javascripts/govuk_tech_docs.js"></script>
    <script src="../_static/javascripts/theme.js"></script>
    <link href="../_static/stylesheets/manifest.css" rel="stylesheet" />
    <link href="../_static/stylesheets/theme.css" rel="stylesheet" />
    <link rel="shortcut icon" href="../_static//favicon.ico"/>
  </head>
  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>
    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>
        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
          <div class="govuk-header__container govuk-header__container--full-width">

            <div class="govuk-header__logo">
  <a href="../index.html" class="govuk-header__link govuk-header__link--homepage">
    <span class="govuk-header__logotype">
      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-header__logotype-crown"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 132 97"
        height="30"
        width="36"
        >
        <path
          fill="currentColor" fill-rule="evenodd"
          d="M25 30.2c3.5 1.5 7.7-.2 9.1-3.7 1.5-3.6-.2-7.8-3.9-9.2-3.6-1.4-7.6.3-9.1 3.9-1.4 3.5.3 7.5 3.9 9zM9 39.5c3.6 1.5 7.8-.2 9.2-3.7 1.5-3.6-.2-7.8-3.9-9.1-3.6-1.5-7.6.2-9.1 3.8-1.4 3.5.3 7.5 3.8 9zM4.4 57.2c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.5-1.5-7.6.3-9.1 3.8-1.4 3.5.3 7.6 3.9 9.1zm38.3-21.4c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.6-1.5-7.6.3-9.1 3.8-1.3 3.6.4 7.7 3.9 9.1zm64.4-5.6c-3.6 1.5-7.8-.2-9.1-3.7-1.5-3.6.2-7.8 3.8-9.2 3.6-1.4 7.7.3 9.2 3.9 1.3 3.5-.4 7.5-3.9 9zm15.9 9.3c-3.6 1.5-7.7-.2-9.1-3.7-1.5-3.6.2-7.8 3.7-9.1 3.6-1.5 7.7.2 9.2 3.8 1.5 3.5-.3 7.5-3.8 9zm4.7 17.7c-3.6 1.5-7.8-.2-9.2-3.8-1.5-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.3 3.5-.4 7.6-3.9 9.1zM89.3 35.8c-3.6 1.5-7.8-.2-9.2-3.8-1.4-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.4 3.6-.3 7.7-3.9 9.1zM69.7 17.7l8.9 4.7V9.3l-8.9 2.8c-.2-.3-.5-.6-.9-.9L72.4 0H59.6l3.5 11.2c-.3.3-.6.5-.9.9l-8.8-2.8v13.1l8.8-4.7c.3.3.6.7.9.9l-5 15.4v.1c-.2.8-.4 1.6-.4 2.4 0 4.1 3.1 7.5 7 8.1h.2c.3 0 .7.1 1 .1.4 0 .7 0 1-.1h.2c4-.6 7.1-4.1 7.1-8.1 0-.8-.1-1.7-.4-2.4V34l-5.1-15.4c.4-.2.7-.6 1-.9zM66 92.8c16.9 0 32.8 1.1 47.1 3.2 4-16.9 8.9-26.7 14-33.5l-9.6-3.4c1 4.9 1.1 7.2 0 10.2-1.5-1.4-3-4.3-4.2-8.7L108.6 76c2.8-2 5-3.2 7.5-3.3-4.4 9.4-10 11.9-13.6 11.2-4.3-.8-6.3-4.6-5.6-7.9 1-4.7 5.7-5.9 8-.5 4.3-8.7-3-11.4-7.6-8.8 7.1-7.2 7.9-13.5 2.1-21.1-8 6.1-8.1 12.3-4.5 20.8-4.7-5.4-12.1-2.5-9.5 6.2 3.4-5.2 7.9-2 7.2 3.1-.6 4.3-6.4 7.8-13.5 7.2-10.3-.9-10.9-8-11.2-13.8 2.5-.5 7.1 1.8 11 7.3L80.2 60c-4.1 4.4-8 5.3-12.3 5.4 1.4-4.4 8-11.6 8-11.6H55.5s6.4 7.2 7.9 11.6c-4.2-.1-8-1-12.3-5.4l1.4 16.4c3.9-5.5 8.5-7.7 10.9-7.3-.3 5.8-.9 12.8-11.1 13.8-7.2.6-12.9-2.9-13.5-7.2-.7-5 3.8-8.3 7.1-3.1 2.7-8.7-4.6-11.6-9.4-6.2 3.7-8.5 3.6-14.7-4.6-20.8-5.8 7.6-5 13.9 2.2 21.1-4.7-2.6-11.9.1-7.7 8.8 2.3-5.5 7.1-4.2 8.1.5.7 3.3-1.3 7.1-5.7 7.9-3.5.7-9-1.8-13.5-11.2 2.5.1 4.7 1.3 7.5 3.3l-4.7-15.4c-1.2 4.4-2.7 7.2-4.3 8.7-1.1-3-.9-5.3 0-10.2l-9.5 3.4c5 6.9 9.9 16.7 14 33.5 14.8-2.1 30.8-3.2 47.7-3.2z"
          ></path>
        <image src="../_static/assets/govuk/assets/images/govuk-logotype-crown.png" xlink:href="" class="govuk-header__logotype-crown-fallback-image" width="36" height="32"></image>
      </svg>
      
      <span class="govuk-header__logotype-text">DIT</span>
    </span>
    <span class="govuk-header__product-name">Tariff Management Tool</span>
  </a><strong class="govuk-tag">Alpha</strong></div>
            <div class="govuk-header__content" role="navigation">
  <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
  <nav>
    <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
      <li class="govuk-header__navigation-item">
        <a class="govuk-header__link" href="https://github.com/uktrade/tamato">GitHub</a>
        </li>
    </ul>
  </nav>
</div>

          </div>
        </header>
      </div>
      <div id="toc-heading" class="toc-show fixedsticky">
        <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
        Table of contents <span class="toc-show__icon"></span>
        </a>
      </div>
      <div class="app-pane__body" data-module="in-page-navigation">

        <div class="app-pane__toc" role="navigation">
  <div class="toc" data-module="table-of-contents">
    <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>

    <div class="search" data-module="search">
  <form action="../search.html" method="get" role="search">
    <label class="govuk-label search__label" for="search">Search</label>
    <input class="govuk-input govuk-!-margin-bottom-4" id="search" name="q" type="text" aria-controls="search-results" placeholder="Search">
  </form>
</div>

    <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">

      
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Tariff Management Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envvars.html">Environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adr/index.html">Architectural Decision Records</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Business Rules</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Base classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="additional_codes.html">Additional Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="certificates.html">Certificates</a></li>
<li class="toctree-l2"><a class="reference internal" href="commodities.html">Goods Nomenclature</a></li>
<li class="toctree-l2"><a class="reference internal" href="footnotes.html">Footnotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="geo_areas.html">Geographical Areas</a></li>
<li class="toctree-l2"><a class="reference internal" href="measures.html">Measures</a></li>
<li class="toctree-l2"><a class="reference internal" href="quotas.html">Quotas</a></li>
<li class="toctree-l2"><a class="reference internal" href="regulations.html">Regulations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../taric/index.html">TARIC3 Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/index.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../importer/index.html">The Importer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exporter/index.html">The Exporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

      <hr size="1">

      
      <h1>On this page</h1>
      <ul>
<li><a class="reference internal" href="#">Base classes</a></li>
</ul>


    </nav>
  </div>
</div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings" role="main">

            
  <section id="module-common.business_rules">
<span id="base-classes"></span><h1>Base classes<a class="headerlink" href="#module-common.business_rules" title="Permalink to this headline">¶</a></h1>
<p>Base classes for business rules and violations.</p>
<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.BusinessRule">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">BusinessRule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#BusinessRule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.BusinessRule" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a TARIC business rule.</p>
<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.BusinessRule.get_linked_models">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">get_linked_models</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/common/business_rules.html#BusinessRule.get_linked_models"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.BusinessRule.get_linked_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns latest approved model instances that have relations to the
passed <code class="docutils literal notranslate"><span class="pre">model</span></code> and have this business rule listed in their
<code class="docutils literal notranslate"><span class="pre">business_rules</span></code> attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TrackedModel</strong> (<em>model</em>) – Get models linked to this model instance</p></li>
<li><p><strong>Transaction</strong> (<em>transaction</em>) – Get latest approved versions of linked
models as of this transaction</p></li>
</ul>
</dd>
<dt class="field-even">Rtype Iterator[TrackedModel]</dt>
<dd class="field-even"><p>The linked models</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.BusinessRule.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#BusinessRule.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.BusinessRule.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform business rule validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – Must be overridden by subclasses</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.BusinessRule.violation">
<span class="sig-name descname"><span class="pre">violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#common.business_rules.BusinessRuleViolation" title="common.business_rules.BusinessRuleViolation"><span class="pre">common.business_rules.BusinessRuleViolation</span></a></span></span><a class="reference internal" href="../_modules/common/business_rules.html#BusinessRule.violation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.BusinessRule.violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a violation exception object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Optional</strong><strong>[</strong><strong>TrackedModel</strong><strong>]</strong> (<em>model</em>) – The model that violates this business rule</p></li>
<li><p><strong>Optional</strong><strong>[</strong><strong>str</strong><strong>]</strong> (<em>message</em>) – A message explaining the violation</p></li>
</ul>
</dd>
<dt class="field-even">Rtype BusinessRuleViolation</dt>
<dd class="field-even"><p>An exception indicating a business rule violation</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.BusinessRuleBase">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">BusinessRuleBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrs</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#BusinessRuleBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.BusinessRuleBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Metaclass for all BusinessRules.</p>
<p>Adds a :exception:BusinessRuleViolation nested class, which can be accessed
as <code class="docutils literal notranslate"><span class="pre">BusinessRuleSubclass.Violation</span></code>, and sets the docstring (and hence the
default error message) to the docstring of the new class.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.BusinessRuleChecker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">BusinessRuleChecker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">models</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#BusinessRuleChecker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.BusinessRuleChecker" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs all business rules governing a specified collection of model
instances and collects all violations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.BusinessRuleChecker.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#BusinessRuleChecker.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.BusinessRuleChecker.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Run business rules against the specified models in the given
transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValidationError</strong> – All rule violations are raised in a single
ValidationError</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.BusinessRuleViolation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">BusinessRuleViolation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#BusinessRuleViolation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.BusinessRuleViolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for business rule violations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.BusinessRuleViolation.default_message">
<span class="sig-name descname"><span class="pre">default_message</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/common/business_rules.html#BusinessRuleViolation.default_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.BusinessRuleViolation.default_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first paragraph of the class docstring (if it exists) to use as
the error message.</p>
<dl class="field-list simple">
<dt class="field-odd">Return Optional[str]</dt>
<dd class="field-odd"><p>The error message</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.DescriptionsRules">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">DescriptionsRules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#DescriptionsRules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.DescriptionsRules" title="Permalink to this definition">¶</a></dt>
<dd><p>Repeated rule pattern for descriptions.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.DescriptionsRules.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.DescriptionsRules.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Repeated rule pattern for descriptions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.DescriptionsRules.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.DescriptionsRules.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform business rule validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – Must be overridden by subclasses</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.ExclusionMembership">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">ExclusionMembership</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#ExclusionMembership"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.ExclusionMembership" title="Permalink to this definition">¶</a></dt>
<dd><p>The excluded geographical area must be a member of the geographical area
group.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.ExclusionMembership.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.ExclusionMembership.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>The excluded geographical area must be a member of the geographical area
group.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="common.business_rules.ExclusionMembership.excluded_from">
<span class="sig-name descname"><span class="pre">excluded_from</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#common.business_rules.ExclusionMembership.excluded_from" title="Permalink to this definition">¶</a></dt>
<dd><p>The object that the geographical area is excluded from.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.ExclusionMembership.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exclusion</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#ExclusionMembership.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.ExclusionMembership.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform business rule validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – Must be overridden by subclasses</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.FootnoteApplicability">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">FootnoteApplicability</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#FootnoteApplicability"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.FootnoteApplicability" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that a footnote type can be applied to a certain model, based on
the set of <code class="xref py py-class docutils literal notranslate"><span class="pre">ApplicationCode</span></code> that the model
reports is valid for itself.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.FootnoteApplicability.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.FootnoteApplicability.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that a footnote type can be applied to a certain model, based on
the set of <code class="xref py py-class docutils literal notranslate"><span class="pre">ApplicationCode</span></code> that the model
reports is valid for itself.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="common.business_rules.FootnoteApplicability.applicable_field">
<span class="sig-name descname"><span class="pre">applicable_field</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#common.business_rules.FootnoteApplicability.applicable_field" title="Permalink to this definition">¶</a></dt>
<dd><p>The field containing a model to check applicability for. It must have a
property or attribute called <code class="xref py py-attr docutils literal notranslate"><span class="pre">footnote_application_codes</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="common.business_rules.FootnoteApplicability.footnote_type_field">
<span class="sig-name descname"><span class="pre">footnote_type_field</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><em class="property"> <span class="pre">=</span> <span class="pre">'associated_footnote__footnote_type'</span></em><a class="headerlink" href="#common.business_rules.FootnoteApplicability.footnote_type_field" title="Permalink to this definition">¶</a></dt>
<dd><p>The field containing a footnote type to check for applicability.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.FootnoteApplicability.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#FootnoteApplicability.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.FootnoteApplicability.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform business rule validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – Must be overridden by subclasses</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.MustExist">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">MustExist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#MustExist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.MustExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Rule enforcing a referenced record exists.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.MustExist.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.MustExist.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Rule enforcing a referenced record exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.MustExist.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#MustExist.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.MustExist.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform business rule validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – Must be overridden by subclasses</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.NoBlankDescription">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">NoBlankDescription</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#NoBlankDescription"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.NoBlankDescription" title="Permalink to this definition">¶</a></dt>
<dd><p>Descriptions should not be blank.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.NoBlankDescription.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.NoBlankDescription.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Descriptions should not be blank.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.NoBlankDescription.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#NoBlankDescription.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.NoBlankDescription.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform business rule validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – Must be overridden by subclasses</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.NoOverlapping">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">NoOverlapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#NoOverlapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.NoOverlapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Rule enforcing no overlapping validity periods of instances of a
model.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.NoOverlapping.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.NoOverlapping.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Rule enforcing no overlapping validity periods of instances of a
model.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.NoOverlapping.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#NoOverlapping.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.NoOverlapping.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check other models with the same identifying fields do not have
overlapping validity periods, except other versions of the same model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>TrackedModel</strong> (<em>model</em>) – The model to compare with</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>self.violation</strong> – Rule violation</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.PreventDeleteIfInUse">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">PreventDeleteIfInUse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#PreventDeleteIfInUse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.PreventDeleteIfInUse" title="Permalink to this definition">¶</a></dt>
<dd><p>Rule preventing deleting an in-use model.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.PreventDeleteIfInUse.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.PreventDeleteIfInUse.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Rule preventing deleting an in-use model.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.PreventDeleteIfInUse.has_violation">
<span class="sig-name descname"><span class="pre">has_violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/common/business_rules.html#PreventDeleteIfInUse.has_violation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.PreventDeleteIfInUse.has_violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the given model instance is “in use” - determined by calling the
method on the model instance named in <code class="docutils literal notranslate"><span class="pre">self.in_use_check</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>TrackedModel</strong> (<em>model</em>) – The model to check</p>
</dd>
<dt class="field-even">Rtype bool</dt>
<dd class="field-even"><p>True if the specified model’s “in use” method returns True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.PreventDeleteIfInUse.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#PreventDeleteIfInUse.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.PreventDeleteIfInUse.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the specified model violates this business rule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>TrackedModel</strong> (<em>model</em>) – The model to check</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#common.business_rules.BusinessRuleViolation" title="common.business_rules.BusinessRuleViolation"><strong>BusinessRuleViolation</strong></a> – Raised if the passed model violates this business rule.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.UniqueIdentifyingFields">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">UniqueIdentifyingFields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#UniqueIdentifyingFields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.UniqueIdentifyingFields" title="Permalink to this definition">¶</a></dt>
<dd><p>Rule enforcing identifying fields are unique.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.UniqueIdentifyingFields.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.UniqueIdentifyingFields.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Rule enforcing identifying fields are unique.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.UniqueIdentifyingFields.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#UniqueIdentifyingFields.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.UniqueIdentifyingFields.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check no other model has the same identifying fields, except other
versions of the same model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>TrackedModel</strong> (<em>model</em>) – The model to compare with</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>self.violation</strong> – Rule violation</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.UpdateValidity">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">UpdateValidity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#UpdateValidity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.UpdateValidity" title="Permalink to this definition">¶</a></dt>
<dd><p>The update type of this object must be valid.</p>
<p>The first update must be of type Create. Subsequent updates must not be of
type Create. After an update of type Delete, there must be no further
updates. Only one version of the object may be updated in a single
transaction.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.UpdateValidity.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.UpdateValidity.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>The update type of this object must be valid.</p>
<p>The first update must be of type Create. Subsequent updates must not be of
type Create. After an update of type Delete, there must be no further
updates. Only one version of the object may be updated in a single
transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.UpdateValidity.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#UpdateValidity.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.UpdateValidity.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform business rule validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – Must be overridden by subclasses</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.ValidityPeriodContained">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">ValidityPeriodContained</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#ValidityPeriodContained"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.ValidityPeriodContained" title="Permalink to this definition">¶</a></dt>
<dd><p>Rule enforcing validity period of a container object completely contains the
validity period of one more contained objects.</p>
<p>Checks that the following is true:</p>
<blockquote>
<div><dl class="simple">
<dt>for contained_object in contained_objects:</dt><dd><p>container_object.valid_between contains
contained_object.valid_between</p>
</dd>
</dl>
</div></blockquote>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.ValidityPeriodContained.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.ValidityPeriodContained.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Rule enforcing validity period of a container object completely contains the
validity period of one more contained objects.</p>
<p>Checks that the following is true:</p>
<blockquote>
<div><dl class="simple">
<dt>for contained_object in contained_objects:</dt><dd><p>container_object.valid_between contains
contained_object.valid_between</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="common.business_rules.ValidityPeriodContained.contained_field_name">
<span class="sig-name descname"><span class="pre">contained_field_name</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#common.business_rules.ValidityPeriodContained.contained_field_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a field (or double-underscore-seperated path to a field) on the
passed model that gives the object(s) who’s validity range should be smaller
or equal at both ends.</p>
<p>This value can be unspecified, in which case the default is that the passed
model is the contained model.</p>
<p>The contained object may be null because subrecords are not routinely
deleted when the parent record is deleted. For example, if a footnote is
attached to a measure but the measure is deleted, the footnote association
may not be routinely cleared up.</p>
<p>Note that this one reason is why it is important to make sure we are
checking against the latest versions because the object will still be
linking via FK to the contained object version it was first attached to. The
other good reason is that if the dates on the container or contained objects
are modified, this business rule needs to be considering them.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="common.business_rules.ValidityPeriodContained.container_field_name">
<span class="sig-name descname"><span class="pre">container_field_name</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#common.business_rules.ValidityPeriodContained.container_field_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the field on the passed model that gives the object who’s
validity range should be bigger or equal at both ends.</p>
<p>This value can be unspecified, in which case the default is that the passed
model is the container model.</p>
<p>The container may be null because some business rules refer to optional
links. E.g. between additional codes and measures: in many cases the measure
just may not be using an addiitonal code, but this rule is run against every
measure. The case where the container has been deleted but the contained
object has not been deleted yet should be prevented by other business rules
but is of course possible to represent in the data, so we ignore that case
too.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="common.business_rules.ValidityPeriodContained.extra_filters">
<span class="sig-name descname"><span class="pre">extra_filters</span></span><em class="property"><span class="pre">:</span> <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#common.business_rules.ValidityPeriodContained.extra_filters" title="Permalink to this definition">¶</a></dt>
<dd><p>Any extra filters that should be applied to filter the contained
objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.ValidityPeriodContained.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#ValidityPeriodContained.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.ValidityPeriodContained.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform business rule validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – Must be overridden by subclasses</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="common.business_rules.ValidityStartDateRules">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">ValidityStartDateRules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#ValidityStartDateRules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.ValidityStartDateRules" title="Permalink to this definition">¶</a></dt>
<dd><p>Repeated rule pattern for descriptions.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="common.business_rules.ValidityStartDateRules.Violation">
<em class="property"><span class="pre">exception</span> </em><span class="sig-name descname"><span class="pre">Violation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../api/common/common.models.html#common.models.TrackedModel" title="common.models.trackedmodel.TrackedModel"><span class="pre">common.models.trackedmodel.TrackedModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.business_rules.ValidityStartDateRules.Violation" title="Permalink to this definition">¶</a></dt>
<dd><p>Repeated rule pattern for descriptions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="common.business_rules.ValidityStartDateRules.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#ValidityStartDateRules.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.ValidityStartDateRules.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform business rule validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – Must be overridden by subclasses</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="common.business_rules.only_applicable_after">
<span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">only_applicable_after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cutoff</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime.date</span><span class="p"><span class="pre">,</span> </span><span class="pre">datetime.datetime</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#only_applicable_after"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.only_applicable_after" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorate BusinessRules to make them only applicable after a given date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong><strong>]</strong> (<em>cutoff Union</em><em>[</em><em>date</em><em>, </em><em>datetime</em><em>,</em>) – The date, datetime or isoformat
date string of the time before which the rule should not apply</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="common.business_rules.skip_when_deleted">
<span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">skip_when_deleted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#common.business_rules.BusinessRule" title="common.business_rules.BusinessRule"><span class="pre">common.business_rules.BusinessRule</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#skip_when_deleted"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.skip_when_deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip business rule when the model is being deleted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>Type</strong><strong>[</strong><strong>BusinessRule</strong><strong>]</strong> (<em>cls</em>) – BusinessRule to decorate</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="common.business_rules.skip_when_not_deleted">
<span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">skip_when_not_deleted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#common.business_rules.BusinessRule" title="common.business_rules.BusinessRule"><span class="pre">common.business_rules.BusinessRule</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#skip_when_not_deleted"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.skip_when_not_deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip business rule when the model is not being deleted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>Type</strong><strong>[</strong><strong>BusinessRule</strong><strong>]</strong> (<em>cls</em>) – The BusinessRule to decorate</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="common.business_rules.skip_when_update_type">
<span class="sig-prename descclassname"><span class="pre">common.business_rules.</span></span><span class="sig-name descname"><span class="pre">skip_when_update_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#common.business_rules.BusinessRule" title="common.business_rules.BusinessRule"><span class="pre">common.business_rules.BusinessRule</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_types</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">common.validators.UpdateType</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/common/business_rules.html#skip_when_update_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#common.business_rules.skip_when_update_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip business rule validation for given update types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Type</strong><strong>[</strong><strong>BusinessRule</strong><strong>]</strong> (<em>cls</em>) – The BusinessRule to decorate</p></li>
<li><p><strong>Iterable</strong><strong>[</strong><strong>int</strong><strong>]</strong> (<em>update_types</em>) – The UpdateTypes to skip</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>



          </main>

          <aside>
  <ul class="contribution-banner">
    
    <li><a href="https://github.com/uktrade/tamato/blob/main/docs/business_rules/common.rst">View source</a></li>
    <li><a href="https://github.com/uktrade/tamato/issues/new?labels=bug&amp;title=Re:%20'business_rules/common.rst'&amp;body=Problem%20with%20'business_rules/common.rst'%20(docs/)">Report problem</a></li>
    <li><a href="https://github.com/uktrade/tamato">GitHub Repo</a></li>
    
  </ul>
</aside>
          <footer class="govuk-footer app-footer" role="contentinfo">
<div class="govuk-footer__meta">
  <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">
    <ul class="govuk-footer__inline-list">
      <li class="govuk-footer__inline-list-item">
        <a class="govuk-footer__link" href="../accessibility.html">Accessibility</a>
      </li>
      <li class="govuk-footer__inline-list-item">
        Built with <a class="govuk-footer__link" href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0 using the <a class="govuk-footer__link" href="https://www.github.com/ukgovdatascience/govuk-tech-docs-sphinx-theme">GOV.UK Tech Docs Sphinx Theme</a>.
      </li>
    </ul>
    <svg
      aria-hidden="true"
      focusable="false"
      class="govuk-footer__licence-logo"
      xmlns="http://www.w3.org/2000/svg"
      viewbox="0 0 483.2 195.7"
      height="17"
      width="41"
      >
      <path
        fill="currentColor"
        d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
    </svg>
    <span class="govuk-footer__licence-description">
    All content is available under the
    <a
      class="govuk-footer__link"
      href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
      rel="license"
      >Open Government Licence v3.0</a>, except where otherwise stated
    </span>
  </div>
  <div class="govuk-footer__meta-item">
    <a
      class="govuk-footer__link govuk-footer__copyright-logo"
      href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
  </div>
</div>
</footer>

        </div>
      </div>
    </div>
  </body>
</html>