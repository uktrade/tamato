<!DOCTYPE html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>3. Modifying the rate under GSP - DBT Tariff Management Tool</title>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/javascripts/_analytics.js"></script>
    <script src="../_static/javascripts/_govuk/govuk-frontend-3.10.2.min.js"></script>
    <script src="../_static/javascripts/_govuk/modules.js"></script>
    <script src="../_static/javascripts/_modules/anchored-headings.js"></script>
    <script src="../_static/javascripts/_modules/collapsible-navigation.js"></script>
    <script src="../_static/javascripts/_modules/in-page-navigation.js"></script>
    <script src="../_static/javascripts/_modules/navigation.js"></script>
    <script src="../_static/javascripts/_modules/page-expiry.js"></script>
    <script src="../_static/javascripts/_modules/table-of-contents.js"></script>
    <script src="../_static/javascripts/_start_modules.js"></script>
    <script src="../_static/javascripts/_vendor/fixedsticky.js"></script>
    <script src="../_static/javascripts/_vendor/lodash.js"></script>
    <script src="../_static/javascripts/_vendor/modernizer.js"></script>
    <script src="../_static/javascripts/govuk_tech_docs.js"></script>
    <script src="../_static/javascripts/theme.js"></script>
    <link href="../_static/stylesheets/manifest.css" rel="stylesheet" />
    <link href="../_static/stylesheets/theme.css" rel="stylesheet" />
    <link rel="shortcut icon" href="../_static//favicon.ico"/>
  </head>
  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>
    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>
        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
          <div class="govuk-header__container govuk-header__container--full-width">

            <div class="govuk-header__logo">
  <a href="../index.html" class="govuk-header__link govuk-header__link--homepage">
    <span class="govuk-header__logotype"><image src="../_static/tudor-crown-logo.svg" xlink:href="" class="govuk-header__logotype-crown" height="30" width="36"></image>
      
      <span class="govuk-header__logotype-text">DBT</span>
    </span>
    <span class="govuk-header__product-name">Tariff Management Tool</span>
  </a><strong class="govuk-tag">Alpha</strong></div>
            <div class="govuk-header__content" role="navigation">
  <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
  <nav>
    <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
      <li class="govuk-header__navigation-item">
        <a class="govuk-header__link" href="https://github.com/uktrade/tamato">GitHub</a>
        </li>
    </ul>
  </nav>
</div>

          </div>
        </header>
      </div>
      <div id="toc-heading" class="toc-show fixedsticky">
        <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
        Table of contents <span class="toc-show__icon"></span>
        </a>
      </div>
      <div class="app-pane__body" data-module="in-page-navigation">

        <div class="app-pane__toc" role="navigation">
  <div class="toc" data-module="table-of-contents">
    <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>

    <div class="search" data-module="search">
  <form action="../search.html" method="get" role="search">
    <label class="govuk-label search__label" for="search">Search</label>
    <input class="govuk-input govuk-!-margin-bottom-4" id="search" name="q" type="text" aria-controls="search-results" placeholder="Search">
  </form>
</div>

    <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">

      
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Tariff Management Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envvars.html">Environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adr/index.html">Architectural Decision Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../business_rules/index.html">Business Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../taric/index.html">TARIC3 Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/index.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../importer/index.html">The Importer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exporter/index.html">The Exporter</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="gherkin.html">Training</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="training.01-setting-simple-rates.feature-file.html"><span class="gherkin-feature-content">1. Setting simple rates</span></a></li>
<li class="toctree-l2"><a class="reference internal" href="training.02-creating-a-new-suspension-with-footnotes.feature-file.html"><span class="gherkin-feature-content">2. Creating a new suspension with footnotes</span></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><span class="gherkin-feature-content">3. Modifying the rate under GSP</span></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scenario-updating-an-existing-gsp-measure-using-the-tariff-editor"><span class="gherkin-scenario-keyword">Scenario:</span> <span class="gherkin-scenario-content">Updating an existing GSP measure using the Tariff Editor</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="#scenario-updating-an-existing-gsp-measure-using-a-jupyter-notebook"><span class="gherkin-scenario-keyword">Scenario:</span> <span class="gherkin-scenario-content">Updating an existing GSP measure using a Jupyter notebook</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

      <hr size="1">

      
      <h1>On this page</h1>
      <ul>
<li><a class="reference internal" href="#"><span class="gherkin-feature-content">3. Modifying the rate under GSP</span></a><ul>
<li><a class="reference internal" href="#scenario-updating-an-existing-gsp-measure-using-the-tariff-editor"><span class="gherkin-scenario-keyword">Scenario:</span> <span class="gherkin-scenario-content">Updating an existing GSP measure using the Tariff Editor</span></a></li>
<li><a class="reference internal" href="#scenario-updating-an-existing-gsp-measure-using-a-jupyter-notebook"><span class="gherkin-scenario-keyword">Scenario:</span> <span class="gherkin-scenario-content">Updating an existing GSP measure using a Jupyter notebook</span></a></li>
</ul>
</li>
</ul>


    </nav>
  </div>
</div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings" role="main">

            
  <link href="../_static/training.css" rel="stylesheet"><section id="modifying-the-rate-under-gsp">
<h1><span class="gherkin-feature-content">3. Modifying the rate under GSP</span><a class="headerlink" href="#modifying-the-rate-under-gsp" title="Permalink to this headline">¶</a></h1>
<p>The Generalised System of Preferences (GSP) is a tariff regime that gives
favourable access to developing countries. It is an example of a
“preferential regime”, i.e. a mechanism by which tariff rates are lowered
for certain countries in certain circumstances.</p>
<p>GSP is a “unilateral” regime, meaning that the United Kingdom gives
preferential access without expectation of anything in return. This is in
contrast to a “bilateral” regime, in which preferential treatment is applied
to both sides. Read more about <a class="reference external" href="https://uktrade.github.io/tariff-data-manual/documentation/trade-policies/unilateral-preferences.html">unilateral preferences</a>.</p>
<p>The Most Favoured Nation and suspension measures that were created in
earlier scenarios applies to all countries. Handling a preference is similar
but also requires specifying the geographical area that the preference
applies to.</p>
<p>A “geographical area” can be a country, region, trading bloc or other group.</p>
<p>There is no technical difference between a country or a region – it just
reflects the United Kingdom’s official view that certain areas are not
recognised as soverign countries.</p>
<p>Groups can contain multiple countries or regions and allow specifying
measures or quotas that should apply to the whole group. Membership of a
group is controlled by a set of dates that specify for what periods a
country or region is a member. Read more about <a class="reference external" href="https://uktrade.github.io/tariff-data-manual/documentation/data-structures/geographical-areas.html">geographical areas</a>.</p>
<section id="scenario-updating-an-existing-gsp-measure-using-the-tariff-editor">
<h2><span class="gherkin-scenario-keyword">Scenario:</span> <span class="gherkin-scenario-content">Updating an existing GSP measure using the Tariff Editor</span><a class="headerlink" href="#scenario-updating-an-existing-gsp-measure-using-the-tariff-editor" title="Permalink to this headline">¶</a></h2>
<blockquote class="pull-quote">
<div><p><span class="gherkin-tag-keyword">Tagged:</span> ui</p>
</div></blockquote>
<p>In this scenario, you will modify the dates on an existing GSP measure to
correct an error. You will first need to find the correct measure and
edit it to correct the dates.</p>
<p>The update is an error correction meaning that the existing measure does
not correctly represent the policy that has been legislated for. The
correct tool to use to make this update is therefore the “Edit measure”
screen.</p>
<ol class="arabic simple">
<li><p><span class="gherkin-step-given-keyword">Given</span> I am on the training environment</p></li>
<li><p><span class="gherkin-step-keyword">And</span> there is a GSP measure</p></li>
<li><p><span class="gherkin-step-when-keyword">When</span> I visit the home page</p></li>
<li><p><span class="gherkin-step-keyword">And</span> I select &quot;Find and edit measures&quot;</p></li>
<li><p><span class="gherkin-step-then-keyword">Then</span> I am taken to the next page</p></li>
<li><p><span class="gherkin-step-when-keyword">When</span> I select &quot;142 – Tariff preference&quot; as the type</p></li>
<li><p><span class="gherkin-step-keyword">And</span> I select &quot;2020 – GSP – General Framework&quot; as the geographical area</p></li>
<li><p><span class="gherkin-step-keyword">And</span> I press &quot;Search and Filter&quot;</p></li>
<li><p><span class="gherkin-step-then-keyword">Then</span> at least 1 search result appears</p></li>
<li><p><span class="gherkin-step-when-keyword">When</span> I press on the 1st search result</p></li>
<li><p><span class="gherkin-step-then-keyword">Then</span> I see a measure screen</p></li>
<li><p><span class="gherkin-step-when-keyword">When</span> I press &quot;Edit this measure&quot;</p></li>
<li><p><span class="gherkin-step-then-keyword">Then</span> I see an edit measure details screen</p></li>
<li><p><span class="gherkin-step-when-keyword">When</span> I expand the Measure validity period area</p></li>
<li><p><span class="gherkin-step-keyword">And</span> I select today as the start date</p></li>
<li><p><span class="gherkin-step-keyword">And</span> I select tomorrow as the end date</p></li>
<li><p><span class="gherkin-step-keyword">And</span> I press &quot;Save&quot;</p></li>
<li><p><span class="gherkin-step-then-keyword">Then</span> I see the confirmation message</p></li>
</ol>
</section>
<section id="scenario-updating-an-existing-gsp-measure-using-a-jupyter-notebook">
<h2><span class="gherkin-scenario-keyword">Scenario:</span> <span class="gherkin-scenario-content">Updating an existing GSP measure using a Jupyter notebook</span><a class="headerlink" href="#scenario-updating-an-existing-gsp-measure-using-a-jupyter-notebook" title="Permalink to this headline">¶</a></h2>
<blockquote class="pull-quote">
<div><p><span class="gherkin-tag-keyword">Tagged:</span> notebook</p>
</div></blockquote>
<p>Note here that we do an update to an existing object using the
<code class="docutils literal notranslate"><span class="pre">new_version</span></code> call, as opposed to just modifying the attributes and
calling <code class="docutils literal notranslate"><span class="pre">save</span></code>. The existing version isn’t modified and the change
will get included in any updates sent out of the system.</p>
<ol class="arabic">
<li><p><span class="gherkin-step-given-keyword">Given</span> a migration notebook</p></li>
<li><p><span class="gherkin-step-keyword">And</span> a Measure with parameters</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>argument</p></th>
<th class="head"><p>value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>measure_type</p></td>
<td><p>MeasureType.current_objects.get(description=&quot;Tariff preference&quot;)</p></td>
</tr>
<tr class="row-odd"><td><p>geographical_area__area_id</p></td>
<td><p>&quot;2020&quot;</p></td>
</tr>
<tr class="row-even"><td><p>geographical_area__description</p></td>
<td><p>&quot;GSP – General Framework&quot;</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p><span class="gherkin-step-when-keyword">When</span> I get a Measure m with parameters</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>argument</p></th>
<th class="head"><p>value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>measure_type__description</p></td>
<td><p>&quot;Tariff preference&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>geographical_area__area_id</p></td>
<td><p>&quot;2020&quot;</p></td>
</tr>
<tr class="row-even"><td><p>valid_between__contains</p></td>
<td><p>date.today()</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p><span class="gherkin-step-keyword">And</span> I create a new version of m with parameters</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>argument</p></th>
<th class="head"><p>value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>valid_between</p></td>
<td><p>TaricDateRange(m.valid_between.lower, date.today())</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p><span class="gherkin-step-keyword">And</span> I validate the workbasket</p></li>
<li><p><span class="gherkin-step-then-keyword">Then</span> I get no errors</p></li>
</ol>
</section>
</section>



          </main>

          <aside>
  <ul class="contribution-banner">
    
    <li><a href="https://github.com/uktrade/tamato/blob/main/docs/training/training.03-modifying-the-rate-under-gsp.feature-file.rst">View source</a></li>
    <li><a href="https://github.com/uktrade/tamato/issues/new?labels=bug&amp;title=Re:%20'training/training.03-modifying-the-rate-under-gsp.feature-file.rst'&amp;body=Problem%20with%20'training/training.03-modifying-the-rate-under-gsp.feature-file.rst'%20(docs/)">Report problem</a></li>
    <li><a href="https://github.com/uktrade/tamato">GitHub Repo</a></li>
    
  </ul>
</aside>
          <footer class="govuk-footer app-footer" role="contentinfo">
<div class="govuk-footer__meta">
  <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">
    <ul class="govuk-footer__inline-list">
      <li class="govuk-footer__inline-list-item">
        <a class="govuk-footer__link" href="../accessibility.html">Accessibility</a>
      </li>
      <li class="govuk-footer__inline-list-item">
        Built with <a class="govuk-footer__link" href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0 using the <a class="govuk-footer__link" href="https://www.github.com/ukgovdatascience/govuk-tech-docs-sphinx-theme">GOV.UK Tech Docs Sphinx Theme</a>.
      </li>
    </ul>
    <svg
      aria-hidden="true"
      focusable="false"
      class="govuk-footer__licence-logo"
      xmlns="http://www.w3.org/2000/svg"
      viewbox="0 0 483.2 195.7"
      height="17"
      width="41"
      >
      <path
        fill="currentColor"
        d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
    </svg>
    <span class="govuk-footer__licence-description">
    All content is available under the
    <a
      class="govuk-footer__link"
      href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
      rel="license"
      >Open Government Licence v3.0</a>, except where otherwise stated
    </span>
  </div>
  <div class="govuk-footer__meta-item">
    <a
      class="govuk-footer__link govuk-footer__copyright-logo"
      href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
  </div>
</div>
</footer>

        </div>
      </div>
    </div>
  </body>
</html>