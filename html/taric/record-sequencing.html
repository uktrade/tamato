<!DOCTYPE html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>Record sequencing - DBT Tariff Management Tool</title>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/javascripts/_analytics.js"></script>
    <script src="../_static/javascripts/_govuk/govuk-frontend-3.10.2.min.js"></script>
    <script src="../_static/javascripts/_govuk/modules.js"></script>
    <script src="../_static/javascripts/_modules/anchored-headings.js"></script>
    <script src="../_static/javascripts/_modules/collapsible-navigation.js"></script>
    <script src="../_static/javascripts/_modules/in-page-navigation.js"></script>
    <script src="../_static/javascripts/_modules/navigation.js"></script>
    <script src="../_static/javascripts/_modules/page-expiry.js"></script>
    <script src="../_static/javascripts/_modules/table-of-contents.js"></script>
    <script src="../_static/javascripts/_start_modules.js"></script>
    <script src="../_static/javascripts/_vendor/fixedsticky.js"></script>
    <script src="../_static/javascripts/_vendor/lodash.js"></script>
    <script src="../_static/javascripts/_vendor/modernizer.js"></script>
    <script src="../_static/javascripts/govuk_tech_docs.js"></script>
    <script src="../_static/javascripts/theme.js"></script>
    <link href="../_static/stylesheets/manifest.css" rel="stylesheet" />
    <link href="../_static/stylesheets/theme.css" rel="stylesheet" />
    <link rel="shortcut icon" href="../_static//favicon.ico"/>
  </head>
  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>
    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>
        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
          <div class="govuk-header__container govuk-header__container--full-width">

            <div class="govuk-header__logo">
  <a href="../index.html" class="govuk-header__link govuk-header__link--homepage">
    <span class="govuk-header__logotype"><image src="../_static/tudor-crown-logo.svg" xlink:href="" class="govuk-header__logotype-crown" height="30" width="36"></image>
      
      <span class="govuk-header__logotype-text">DBT</span>
    </span>
    <span class="govuk-header__product-name">Tariff Management Tool</span>
  </a><strong class="govuk-tag">Alpha</strong></div>
            <div class="govuk-header__content" role="navigation">
  <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
  <nav>
    <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
      <li class="govuk-header__navigation-item">
        <a class="govuk-header__link" href="https://github.com/uktrade/tamato">GitHub</a>
        </li>
    </ul>
  </nav>
</div>

          </div>
        </header>
      </div>
      <div id="toc-heading" class="toc-show fixedsticky">
        <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
        Table of contents <span class="toc-show__icon"></span>
        </a>
      </div>
      <div class="app-pane__body" data-module="in-page-navigation">

        <div class="app-pane__toc" role="navigation">
  <div class="toc" data-module="table-of-contents">
    <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>

    <div class="search" data-module="search">
  <form action="../search.html" method="get" role="search">
    <label class="govuk-label search__label" for="search">Search</label>
    <input class="govuk-input govuk-!-margin-bottom-4" id="search" name="q" type="text" aria-controls="search-results" placeholder="Search">
  </form>
</div>

    <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">

      
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Tariff Management Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envvars.html">Environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adr/index.html">Architectural Decision Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../business_rules/index.html">Business Rules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">TARIC3 Principles</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="data-access-keys.html">Data access keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="edifact.html">EDIFACT</a></li>
<li class="toctree-l2"><a class="reference internal" href="extractions.html">Extractions</a></li>
<li class="toctree-l2"><a class="reference internal" href="interpretation-of-dates.html">Interpretation of dates</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Record sequencing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#inserts">Inserts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updates">Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deletes">Deletes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#glossary-of-terminology">Glossary Of Terminology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/index.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../importer/index.html">The Importer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exporter/index.html">The Exporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training/gherkin.html">Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

      <hr size="1">

      
      <h1>On this page</h1>
      <ul>
<li><a class="reference internal" href="#">Record sequencing</a><ul>
<li><a class="reference internal" href="#inserts">Inserts</a></li>
<li><a class="reference internal" href="#updates">Updates</a></li>
<li><a class="reference internal" href="#deletes">Deletes</a></li>
</ul>
</li>
</ul>


    </nav>
  </div>
</div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings" role="main">

            
  <section id="record-sequencing">
<h1>Record sequencing<a class="headerlink" href="#record-sequencing" title="Permalink to this headline">¶</a></h1>
<p>One of the major objectives of TARIC is to extract at regular intervals all
amendments to the database and to send them to the Member States. The
transmitted data should be in such a format that upon receipt it can be
processed automatically by a computer, and provide the source for national
tariff updates.</p>
<p>In order to allow Member States to process (and to validate if they wish) the
data in a meaningful way, it is important that the sequence of the data is
properly understood.</p>
<p>All records contain the following common information:</p>
<ul class="simple">
<li><p>a record sequence number; this controls the physical sequence of the records</p></li>
<li><p>a transaction identifier, record identifier, update type: these fields
identify the record from a logical point of view.</p></li>
</ul>
<p>A particular problem is that a logical unit of work for a user can be
distributed over several tables in the database; for instance, closing a goods
nomenclature code results in changing the end date but this also closes any
footnote associations, nomenclature group memberships, etc., information which
is held in different tables.</p>
<p>A transaction identifier will be used to group together all database actions
covering a logical unit of work. As a result, all records involved in closing a
goods nomenclature code will be tagged with the same (unique) value, ie the
transaction identifier. As a result, records can be extracted in any sequence.
Subsequently they will be sorted by transaction identifier and record
identifier. In this way the interface file will reflect all data capture work
and system updates.</p>
<p>The Member States should process the file based on this transaction principle.</p>
<section id="inserts">
<h2>Inserts<a class="headerlink" href="#inserts" title="Permalink to this headline">¶</a></h2>
<p>All validations can be applied on a record
by record basis for inserts, but the final acceptance should be done at
transaction level. For example, when a goods nomenclature code is
created, several physical records will be sent in the following order:</p>
<ul class="simple">
<li><p>goods nomenclature: record identifier 40000</p></li>
<li><p>goods nomenclature indent: record identifier 40005</p></li>
<li><p>goods nomenclature description period: record identifier 40010</p></li>
<li><p>goods nomenclature description(s): record identifier 40015</p></li>
<li><p>potential relationships with nomenclature groups, footnotes: record identifiers 40020, 40025</p></li>
<li><p>goods nomenclature origin: record identifier 40035</p></li>
</ul>
<p>Validations can be applied at record level as the records are sent in a logical
order, but the transaction should be refused as a whole if a validation fails.</p>
</section>
<section id="updates">
<h2>Updates<a class="headerlink" href="#updates" title="Permalink to this headline">¶</a></h2>
<p>Validations must be applied at transaction level for updates.</p>
<p>For example, when a nomenclature code is closed, several physical records will
be sent in the following order:</p>
<ul class="simple">
<li><p>goods nomenclature with the new end of validity date: record identifier 40000</p></li>
<li><p>relationships with nomenclature groups, footnotes: record identifiers 40020, 40025</p></li>
<li><p>goods nomenclature successor: record identifier 40040</p></li>
</ul>
<p>Validations cannot be applied at record level. Validating the goods nomenclature
code means, among other things, that its validity period must span the validity
periods of its relationships. This is not the case when processing the goods
nomenclature record, but MUST be the case when all the records of that
transaction are processed.</p>
</section>
<section id="deletes">
<h2>Deletes<a class="headerlink" href="#deletes" title="Permalink to this headline">¶</a></h2>
<p>Validations must be applied
at transaction level for deletes. For example, when a goods nomenclature
code is deleted, several physical records will be sent in the following
order:</p>
<ul class="simple">
<li><p>goods nomenclature: record identifier 40000</p></li>
<li><p>goods nomenclature indent(s): record identifier 40005</p></li>
<li><p>goods nomenclature description period(s): record identifier 40010</p></li>
<li><p>goods nomenclature description(s): record identifier 40015</p></li>
<li><p>relationships with nomenclature groups, footnotes: record identifiers 40020, 40025</p></li>
<li><p>goods nomenclature origin: record identifier 40035</p></li>
<li><p>goods nomenclature successor: record identifier 40040</p></li>
</ul>
<p>Validations could be applied at record level. Deleting the goods nomenclature
code will result in deleting all its relationships. The interface file will
contain all these deletes in detail. If validation is required at that level one
could check at the end of the transaction if all the relationships have been
deleted before accepting the delete as a whole.</p>
</section>
</section>



          </main>

          <aside>
  <ul class="contribution-banner">
    
    <li><a href="https://github.com/uktrade/tamato/blob/main/docs/taric/record-sequencing.rst">View source</a></li>
    <li><a href="https://github.com/uktrade/tamato/issues/new?labels=bug&amp;title=Re:%20'taric/record-sequencing.rst'&amp;body=Problem%20with%20'taric/record-sequencing.rst'%20(docs/)">Report problem</a></li>
    <li><a href="https://github.com/uktrade/tamato">GitHub Repo</a></li>
    
  </ul>
</aside>
          <footer class="govuk-footer app-footer" role="contentinfo">
<div class="govuk-footer__meta">
  <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">
    <ul class="govuk-footer__inline-list">
      <li class="govuk-footer__inline-list-item">
        <a class="govuk-footer__link" href="../accessibility.html">Accessibility</a>
      </li>
      <li class="govuk-footer__inline-list-item">
        Built with <a class="govuk-footer__link" href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0 using the <a class="govuk-footer__link" href="https://www.github.com/ukgovdatascience/govuk-tech-docs-sphinx-theme">GOV.UK Tech Docs Sphinx Theme</a>.
      </li>
    </ul>
    <svg
      aria-hidden="true"
      focusable="false"
      class="govuk-footer__licence-logo"
      xmlns="http://www.w3.org/2000/svg"
      viewbox="0 0 483.2 195.7"
      height="17"
      width="41"
      >
      <path
        fill="currentColor"
        d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
    </svg>
    <span class="govuk-footer__licence-description">
    All content is available under the
    <a
      class="govuk-footer__link"
      href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
      rel="license"
      >Open Government Licence v3.0</a>, except where otherwise stated
    </span>
  </div>
  <div class="govuk-footer__meta-item">
    <a
      class="govuk-footer__link govuk-footer__copyright-logo"
      href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
  </div>
</div>
</footer>

        </div>
      </div>
    </div>
  </body>
</html>