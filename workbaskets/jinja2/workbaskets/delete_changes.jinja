{% extends "layouts/layout.jinja" %}

{% from "components/accordion/macro.njk" import govukAccordion %}
{% from "components/button/macro.njk" import govukButton %}
{% from "components/tabs/macro.njk" import govukTabs %}
{% from "components/warning-text/macro.njk" import govukWarningText %}


{% set page_title = "Remove tariff changes" %}
{% set accordion_items = [] %}
{% for object in tracked_models %}
  {% set core_data_tab_html %}{% include "includes/measures/tabs/core_data.jinja" %}{% endset %}
  {% set conditions_tab_html %}{% include "includes/measures/tabs/conditions.jinja" %}{% endset %}
  {% set item_content =
    govukTabs({
      "items": [
        {
          "label": "Details",
          "id": "core-data",
          "panel": {
            "html": core_data_tab_html
          }
        },
        {
          "label": "Conditions",
          "id": "conditions",
          "panel": {
            "html": conditions_tab_html
          }
        }
      ]
    })
  %}
  {% set item =
    {
      "heading": {
        "text": object.polymorphic_ctype.model.title() ~ ": " ~ object.sid
      },
      "content": {
        "html": item_content
      },
      "summary": {
      }
    }
  %}

  {% set accordion_items = accordion_items.append(item) %}
{% endfor %}


{% block breadcrumb %}
  {{ govukBreadcrumbs({
    "items": [
      {"text": "Home", "href": url("index")},
      {"text": page_title}
    ]
  }) }}
{% endblock %}


{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        Remove tariff changes
        <span class="govuk-caption-xl"></span>
      </h1>
    </div>
  </div>

  <div class="govuk-grid-row govuk-!-margin-bottom-5">
    <div class="govuk-grid-column-full">
      {{ govukWarningText({
        "text": "Are you sure you want to permanently remove the tarif changes below?",
        "iconFallbackText": "Warning"
      }) }}

      <form method="post">
        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

        <div class="govuk-button-group">
          {{ govukButton({
            "text": "Remove tariff changes",
            "classes": "govuk-button--warning",
            "name": "action",
            "value": "delete"
          }) }}

          {{ govukButton({
            "text": "Cancel",
            "classes": "govuk-button--secondary",
            "name": "action",
            "value": "cancel"
          }) }}
        </div>
      </form>
    </div>
  </div>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      {{ govukAccordion({
        "id": "accordion-default",
        "items": accordion_items
      }) }}
    </div>
  </div>
{% endblock %}
