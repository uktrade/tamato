{% extends "common/delete.jinja" %}

{% from "components/breadcrumbs.jinja" import breadcrumbs %}
{% from "components/warning-text/macro.njk" import govukWarningText %}
{% from "components/button/macro.njk" import govukButton %}

{% set page_title = "Delete my Task:" ~ object.title %}

{% block content %}
<div class="govuk-!-width-two-thirds">
  <h1 class="govuk-heading-xl">Delete {{ verbose_name }}: {{ object.title }}</h1>
  {% if page_label %}
    <div class="govuk-hint"> {{ page_label }}</div>
  {% endif %}
  {% block form %}
    {{ govukWarningText({
    "text": "Are you sure you want to delete this " ~ verbose_name ~ "?"
  }) }}

  {% if not object.parent_task %}
  {% call django_form(action=url("workflow:task-ui-delete", kwargs={"pk": object.pk})) %}
    {{ crispy(form) }}
  {% endcall %}
  
  {% else %}
  {% call django_form(action=url("workflow:subtask-ui-delete", kwargs={"pk": object.pk})) %}
    {{ crispy(form) }}
  {% endcall %}
  {% endif %}

  {% endblock %}
</div>
{% endblock %}

{% block breadcrumb %}
  {{ breadcrumbs(request, [
      {"text": "Find and view tasks", "href": url("workflow:task-ui-list")},
      {"text": verbose_name ~ " :" ~ object.title, "href": url("workflow:task-ui-detail", kwargs={"pk": object.pk})},
      {"text": page_title}
    ])
  }}
{% endblock %}
