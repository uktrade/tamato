{% from "components/table/macro.njk" import govukTable %}
{% from 'macros/create_link.jinja' import create_link %}

{%- set table_rows = [] -%}
{% for measure in ref_doc.measure_list %}
    {{ table_rows.append([
        {"text": create_link(url("commodity-ui-detail", kwargs={"sid": measure.goods_nomenclature.sid}), measure.goods_nomenclature.item_id) if measure.goods_nomenclature else '-'},
        {"text": measure.duty_sentence},
    ]) or "" }}
{% endfor %}

<div class="quota__core-data govuk-grid-row">
    <div class="quota__core-data__content govuk-grid-column-three-quarters">
        {{ govukTable({
        "head": [
            {"text": "Commodity code"},
            {"text": "Preferential duty rates"},
        ],
        "rows": table_rows
        }) }}
    </div>

    <div class="govuk-grid-column-one-quarter">
        <div class="app-related-items" role="complementary">
            <h2 class="govuk-heading-s" id="subsection-title">Actions</h2>
            <ul class="govuk-list govuk-!-font-size-16">
                <li><a class="govuk-link" href="{{TBC}}">Copy table data</a></li>
            </ul>
        </div>
    </div>
</div>
