{% extends "workbaskets/review.jinja" %}
{% from "components/button/macro.njk" import govukButton %}

{% block filters %}{% endblock %}
{% block tab_content %}
  <div class="govuk-body">
    {{ report_lines|length if report_lines else 0 }} goods
    change{{ report_lines|pluralize }} available to review.

    {% if import_batch_pk %}
      <a href="{{ url("goods-report-ui-download", kwargs={"pk": import_batch_pk}) }}" class="govuk-link fake-link align-right govuk-!-margin-left-5">Download as Excel <span class="down-arrow">&#9660;</span></a>
    {% endif %}

    {% if unsent_notification %}
      <a href="{{ url("goods-report-notify", kwargs={"pk": import_batch_pk}) }}" class="govuk-link fake-link align-right">Notify Channel Islands <span class="right-arrow">&#9654;</span></a>
    {% endif %}
  </div>

  {% if report_lines %}
    {% set headings = [] %}
    {% for heading in column_headings %}
      {{ headings.append({"text": heading}) or "" }}
    {% endfor %}

    {% set rows = [] %}
    {% for row in report_lines %}
      {% set cells = [] %}
      {% for cell in row %}
        {{ cells.append({"text": cell}) or "" }}
      {% endfor %}
      {{ rows.append(cells) or "" }}
    {% endfor %}

    {{ govukTable({
      "head": headings,
      "rows": rows,
    }) }}
  {% endif %}

  {% set items_name = "goods changes" %}
{% endblock %}
