{% set origins %}
    <ul class="govuk-table-list">
        {% for origin in object.quotaordernumberorigin_set.latest_approved().distinct('geographical_area') %}
            <li>{{origin.geographical_area.area_id}} - {{origin.geographical_area.get_description().description}} </li>
        {% endfor %}
    </ul>
{% endset %}

<div class="quota__core-data govuk-grid-row">
    <div class="quota__core-data__content govuk-grid-column-three-quarters">
        <h2 class="govuk-heading-l">Details</h2>
        {{ govukSummaryList({
            "rows": [
            {
                "key": {"text": "Order Number"},
                "value": {"text": object.order_number},
                "actions": {"items": []}
            },
            {
                "key": {"text": "Geographical area"},
                "value": {"text": origins if object.origins.all() else "-"},
                "actions": {"items": []}
            },
            {
                "key": {"text": "Geographical area exclusions"},
                "value": {"text": object.geographical_exclusion_descriptions|join(", ") if object.geographical_exclusion_descriptions else "-"},
                "actions": {"items": []}
            },
            {
                "key": {"text": "Start date"},
                "value": {"text":  "{:%d %b %Y}".format(object.valid_between.lower)},
                "actions": {"items": []}
            },
            {
                "key": {"text": "End date"},
                "value": {"text":  "{:%d %b %Y}".format(object.valid_between.upper) if object.valid_between.upper else "-"},
                "actions": {"items": []}
            },
            {
                "key": {"text": "Category"},
                "value": {"text": object.get_category_display()},
                "actions": {"items": []}
            },
            {
                "key": {"text": "Mechanism"},
                "value": {"text": object.get_mechanism_display()},
                "actions": {"items": []}
            },
            {
                "key": {"text": "Required certificates"},
                "value": {"text": object.required_certificates.all()|join(", ") if object.is_origin_quota else "-"},
                "actions": {"items": []}
            },
            ]
        })}}
    </div>
    {% include "includes/quotas/actions.jinja"%}
</div>
